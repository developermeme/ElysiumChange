{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Countries } from \"../../../common/json/Countries\";\nimport { LoggedInUser } from \"../../../common/Script\";\nimport { updateUserProfile } from \"../../../stateContainers/Profile/ThunkAction\";\nimport { validateMobileNumber, validateName } from \"../../../UserAccount/Script\";\nexport const useProfile = () => {\n  _s();\n\n  const {\n    profileData\n  } = useSelector(state => state);\n  const ProfileInfo = profileData && profileData.profileDetails.Profile;\n  const SubscriptionInfo = profileData && profileData.subcription;\n  const PlansInfo = profileData && profileData.plans;\n  const subsInfo = profileData && profileData.subcription;\n  const dispatch = useDispatch();\n  const initialState = {\n    uPhone: ProfileInfo === null || ProfileInfo === void 0 ? void 0 : ProfileInfo.uPhone,\n    fname: ProfileInfo === null || ProfileInfo === void 0 ? void 0 : ProfileInfo.fname,\n    lname: ProfileInfo === null || ProfileInfo === void 0 ? void 0 : ProfileInfo.lname\n  };\n  const [state, setState] = React.useState(initialState);\n  const [error, setError] = React.useState();\n  const [visible, setVisible] = useState(false);\n  const [fileSelected, setFileSelected] = React.useState(ProfileInfo === null || ProfileInfo === void 0 ? void 0 : ProfileInfo.iUmg);\n\n  const handleImageChange = function (e) {\n    const fileList = e.target.files;\n    if (!fileList) return;\n    setFileSelected(fileList[0]);\n  };\n\n  const uploadFile = function () {\n    if (fileSelected) {\n      const formData = new FormData();\n      formData.append(\"image\", fileSelected, fileSelected.name);\n      return formData;\n    }\n  };\n\n  React.useEffect(() => {\n    if (!error) {\n      setVisible(false);\n      return;\n    }\n\n    setVisible(true);\n    const timer = setTimeout(() => {\n      setVisible(false);\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [error]);\n\n  const handleOnChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setState({ ...state,\n      [name]: value\n    });\n    setVisible(false);\n    setError(null);\n  };\n\n  const countries = Countries.map(item => {\n    return item.name;\n  });\n  const [selectedCountry, setSelectedCountry] = React.useState(\"\");\n  const [selectedRegion, setSelectedRegion] = React.useState(\"\");\n\n  const handleCountrySelect = e => {\n    e.preventDefault();\n    setSelectedCountry(e.target.value);\n  };\n\n  React.useEffect(() => {\n    const regionList = Countries.find((item, index) => item.name === selectedCountry);\n    setSelectedRegion(regionList === null || regionList === void 0 ? void 0 : regionList.dialCode);\n  }, [selectedCountry]);\n\n  const validate = () => {\n    let fields = state;\n    let errors = \"\";\n    let formIsValid = true;\n    const isValidFirstName = validateName(fields.fname, \"fname\");\n    const isValidLastName = validateName(fields.lname, \"lname\");\n    const isValidMobileNumber = validateMobileNumber(fields.uPhone);\n\n    if (formIsValid && !isValidFirstName.formIsValid) {\n      errors = isValidFirstName.error;\n      formIsValid = false;\n    } else if (formIsValid && !isValidLastName.formIsValid) {\n      errors = isValidLastName.error;\n      formIsValid = false;\n    } else if (formIsValid && !isValidMobileNumber.formIsValid) {\n      errors = isValidMobileNumber.error;\n      formIsValid = false;\n    } else if (formIsValid && selectedRegion === undefined) {\n      formIsValid = false;\n      errors = \"Please select your country\";\n    } else {\n      errors = \"\";\n      formIsValid = true;\n    }\n\n    setError(errors);\n    return formIsValid;\n  };\n\n  const registerOnSubmit = e => {\n    e.preventDefault();\n\n    if (validate()) {\n      let credentials = { ...state\n      };\n      credentials.uPhone = selectedRegion + credentials.uPhone;\n      let updatedData = { ...credentials,\n        file: \"\",\n        email: LoggedInUser,\n        userid: ProfileInfo.userid\n      };\n      dispatch(updateUserProfile(updatedData));\n    } else {\n      setVisible(true);\n    }\n  };\n\n  return {\n    state,\n    error,\n    visible,\n    fileSelected,\n    ProfileInfo,\n    uploadFile,\n    handleImageChange,\n    handleOnChange,\n    registerOnSubmit,\n    SubscriptionInfo,\n    PlansInfo,\n    subsInfo,\n    selectedCountry,\n    handleCountrySelect,\n    countries\n  };\n};\n\n_s(useProfile, \"JEny46kNIZKCbsWiAxr5oQja5q4=\", false, function () {\n  return [useSelector, useDispatch];\n});","map":{"version":3,"names":["React","useState","useDispatch","useSelector","Countries","LoggedInUser","updateUserProfile","validateMobileNumber","validateName","useProfile","profileData","state","ProfileInfo","profileDetails","Profile","SubscriptionInfo","subcription","PlansInfo","plans","subsInfo","dispatch","initialState","uPhone","fname","lname","setState","error","setError","visible","setVisible","fileSelected","setFileSelected","iUmg","handleImageChange","e","fileList","target","files","uploadFile","formData","FormData","append","name","useEffect","timer","setTimeout","clearTimeout","handleOnChange","value","countries","map","item","selectedCountry","setSelectedCountry","selectedRegion","setSelectedRegion","handleCountrySelect","preventDefault","regionList","find","index","dialCode","validate","fields","errors","formIsValid","isValidFirstName","isValidLastName","isValidMobileNumber","undefined","registerOnSubmit","credentials","updatedData","file","email","userid"],"sources":["C:/Users/arunm/MeMeglobalsites/Elysium/New folder/ElysiumChange/src/components/containers/Dashboard/MyProfile/useProfile.hook.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { onChange } from \"../../../../constant/Types\";\r\nimport { IRootState } from \"../../../../redux/reducer/CombineReducer\";\r\nimport { Countries } from \"../../../common/json/Countries\";\r\nimport { LoggedInUser } from \"../../../common/Script\";\r\nimport { updateUserProfile } from \"../../../stateContainers/Profile/ThunkAction\";\r\nimport {\r\n  validateMobileNumber,\r\n  validateName,\r\n} from \"../../../UserAccount/Script\";\r\n\r\nexport const useProfile = () => {\r\n  const { profileData } = useSelector((state: IRootState) => state);\r\n  const ProfileInfo = profileData && profileData.profileDetails.Profile;\r\n  const SubscriptionInfo = profileData && profileData.subcription;\r\n  const PlansInfo = profileData && profileData.plans;\r\n  const subsInfo = profileData && profileData.subcription;\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const initialState = {\r\n    uPhone: ProfileInfo?.uPhone,\r\n    fname: ProfileInfo?.fname,\r\n    lname: ProfileInfo?.lname,\r\n  };\r\n\r\n  const [state, setState] = React.useState(initialState);\r\n  const [error, setError] = React.useState<string | null>();\r\n  const [visible, setVisible] = useState(false);\r\n  const [fileSelected, setFileSelected] = React.useState<File | any>(\r\n    ProfileInfo?.iUmg\r\n  );\r\n\r\n  const handleImageChange = function (e: React.ChangeEvent<HTMLInputElement>) {\r\n    const fileList = e.target.files;\r\n    if (!fileList) return;\r\n    setFileSelected(fileList[0]);\r\n  };\r\n\r\n  const uploadFile = function () {\r\n    if (fileSelected) {\r\n      const formData = new FormData();\r\n      formData.append(\"image\", fileSelected, fileSelected.name);\r\n      return formData;\r\n    }\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (!error) {\r\n      setVisible(false);\r\n      return;\r\n    }\r\n    setVisible(true);\r\n    const timer = setTimeout(() => {\r\n      setVisible(false);\r\n    }, 3000);\r\n    return () => clearTimeout(timer);\r\n  }, [error]);\r\n\r\n  const handleOnChange = (e: onChange) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    setState({ ...state, [name]: value });\r\n    setVisible(false);\r\n    setError(null);\r\n  };\r\n\r\n  const countries = Countries.map((item: any) => {\r\n    return item.name;\r\n  });\r\n\r\n  const [selectedCountry, setSelectedCountry] = React.useState(\"\");\r\n  const [selectedRegion, setSelectedRegion] = React.useState<\r\n    string | undefined\r\n  >(\"\");\r\n\r\n  const handleCountrySelect = (e: any) => {\r\n    e.preventDefault();\r\n    setSelectedCountry(e.target.value);\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    const regionList = Countries.find(\r\n      (item: any, index) => item.name === selectedCountry\r\n    );\r\n    setSelectedRegion(regionList?.dialCode);\r\n  }, [selectedCountry]);\r\n\r\n  const validate = () => {\r\n    let fields = state;\r\n    let errors = \"\";\r\n    let formIsValid = true;\r\n\r\n    const isValidFirstName = validateName(fields.fname, \"fname\");\r\n    const isValidLastName = validateName(fields.lname, \"lname\");\r\n    const isValidMobileNumber = validateMobileNumber(fields.uPhone);\r\n    if (formIsValid && !isValidFirstName.formIsValid) {\r\n      errors = isValidFirstName.error;\r\n      formIsValid = false;\r\n    } else if (formIsValid && !isValidLastName.formIsValid) {\r\n      errors = isValidLastName.error;\r\n      formIsValid = false;\r\n    } else if (formIsValid && !isValidMobileNumber.formIsValid) {\r\n      errors = isValidMobileNumber.error;\r\n      formIsValid = false;\r\n    } else if (formIsValid && selectedRegion === undefined) {\r\n      formIsValid = false;\r\n      errors = \"Please select your country\";\r\n    } else {\r\n      errors = \"\";\r\n      formIsValid = true;\r\n    }\r\n    setError(errors);\r\n    return formIsValid;\r\n  };\r\n\r\n  const registerOnSubmit = (e: any) => {\r\n    e.preventDefault();\r\n    if (validate()) {\r\n      let credentials = { ...state };\r\n      credentials.uPhone = selectedRegion + credentials.uPhone;\r\n      let updatedData: any = {\r\n        ...credentials,\r\n        file: \"\",\r\n        email: LoggedInUser as string,\r\n        userid: ProfileInfo.userid,\r\n      };\r\n      dispatch(updateUserProfile(updatedData));\r\n    } else {\r\n      setVisible(true);\r\n    }\r\n  };\r\n\r\n  return {\r\n    state,\r\n    error,\r\n    visible,\r\n    fileSelected,\r\n    ProfileInfo,\r\n    uploadFile,\r\n    handleImageChange,\r\n    handleOnChange,\r\n    registerOnSubmit,\r\n    SubscriptionInfo,\r\n    PlansInfo,\r\n    subsInfo,\r\n    selectedCountry,\r\n    handleCountrySelect,\r\n    countries,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}