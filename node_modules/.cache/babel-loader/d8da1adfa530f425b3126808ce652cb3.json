{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { validateEmailId } from \"../components/UserAccount/Script\";\nimport { ERROR404, ERROR500 } from \"../constant/routes\";\nimport { UserServices as UserAPI } from \"../utils/API\";\nexport const useLogin = () => {\n  _s();\n\n  const loginInitialState = {\n    username: \"\",\n    password: \"\"\n  };\n  const navigate = useNavigate();\n  const [loginCredentials, setLoginCredentials] = React.useState(loginInitialState);\n  const [loginErrors, setLoginErrors] = React.useState(\"\");\n  const [successMsg, setSuccessMsg] = React.useState(\"\");\n\n  const handleLoginFormChange = e => {\n    const name = e.target.name;\n    const value = e.target.value;\n    setLoginCredentials({ ...loginCredentials,\n      [name]: value\n    });\n  };\n\n  const handleLoginValidation = () => {\n    var _fields$password;\n\n    let fields = loginCredentials;\n    let formIsValid = true;\n    let errors = \"\";\n    const isValidEmailId = validateEmailId(fields.username);\n\n    if (formIsValid && !isValidEmailId.formIsValid) {\n      errors = isValidEmailId.error;\n      formIsValid = false;\n    } else if (formIsValid && (fields === null || fields === void 0 ? void 0 : (_fields$password = fields.password) === null || _fields$password === void 0 ? void 0 : _fields$password.length) < 5) {\n      errors = \"Please enter your password\";\n      formIsValid = false;\n    } else {\n      errors = \"\";\n      formIsValid = true;\n    }\n\n    setLoginErrors(errors);\n    return formIsValid;\n  };\n\n  const onFocusEvent = () => {\n    setLoginErrors(\"\");\n  };\n\n  React.useEffect(() => {\n    if (loginErrors === \"\") {\n      return;\n    }\n\n    const timer = setTimeout(() => {\n      setLoginErrors(\"\");\n    }, 3000);\n    return () => clearTimeout(timer);\n  }, [loginErrors]);\n\n  const handleLoginSubmit = e => {\n    e.preventDefault();\n    const user = {\n      email: loginCredentials.username,\n      password: loginCredentials.password\n    };\n\n    if (handleLoginValidation()) {\n      UserAPI.login(user).then(response => {\n        if (response.status === 200 && response.data === \"USER\") {\n          setSuccessMsg(\"Sucessfully logged in!\");\n          localStorage.setItem(\"user-login\", user.email);\n          navigate(\"/\");\n          setTimeout(() => {\n            window.location.reload();\n          }, 3000);\n        }\n      }).catch(error => {\n        if (error.response) {\n          console.log(error.response.status);\n\n          switch (error.response.status) {\n            case 401:\n              {\n                setLoginErrors(\"Incorrect Password\");\n                break;\n              }\n\n            case 500:\n              {\n                window.location.href = ERROR500;\n                break;\n              }\n\n            case 404:\n              {\n                window.location.href = ERROR404;\n                break;\n              }\n\n            default:\n              window.location.href = ERROR500;\n          }\n        }\n      });\n    }\n  };\n\n  return {\n    loginCredentials,\n    loginErrors,\n    handleLoginFormChange,\n    handleLoginSubmit,\n    successMsg,\n    onFocusEvent\n  };\n};\n\n_s(useLogin, \"SeGM7AghVkxMw2i2e5/Na1gdojg=\", false, function () {\n  return [useNavigate];\n});","map":{"version":3,"names":["React","useNavigate","validateEmailId","ERROR404","ERROR500","UserServices","UserAPI","useLogin","loginInitialState","username","password","navigate","loginCredentials","setLoginCredentials","useState","loginErrors","setLoginErrors","successMsg","setSuccessMsg","handleLoginFormChange","e","name","target","value","handleLoginValidation","fields","formIsValid","errors","isValidEmailId","error","length","onFocusEvent","useEffect","timer","setTimeout","clearTimeout","handleLoginSubmit","preventDefault","user","email","login","then","response","status","data","localStorage","setItem","window","location","reload","catch","console","log","href"],"sources":["C:/Users/arunm/MeMeglobalsites/Elysium/New folder/ElysiumChange/src/hook/useLogin.hook.tsx"],"sourcesContent":["import React from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { validateEmailId } from \"../components/UserAccount/Script\";\r\nimport { ERROR404, ERROR500 } from \"../constant/routes\";\r\nimport { loginState, onChange, onClick } from \"../constant/Types\";\r\nimport { UserServices as UserAPI } from \"../utils/API\";\r\n\r\nexport const useLogin = () => {\r\n  const loginInitialState: loginState = {\r\n    username: \"\",\r\n    password: \"\",\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const [loginCredentials, setLoginCredentials] =\r\n    React.useState<loginState>(loginInitialState);\r\n\r\n  const [loginErrors, setLoginErrors] = React.useState<string>(\"\");\r\n\r\n  const [successMsg, setSuccessMsg] = React.useState(\"\");\r\n\r\n  const handleLoginFormChange = (e: onChange) => {\r\n    const name = e.target.name;\r\n    const value = e.target.value;\r\n    setLoginCredentials({ ...loginCredentials, [name]: value });\r\n  };\r\n\r\n  const handleLoginValidation = () => {\r\n    let fields = loginCredentials;\r\n    let formIsValid = true;\r\n    let errors = \"\";\r\n\r\n    const isValidEmailId = validateEmailId(fields.username);\r\n\r\n    if (formIsValid && !isValidEmailId.formIsValid) {\r\n      errors = isValidEmailId.error;\r\n      formIsValid = false;\r\n    } else if (formIsValid && fields?.password?.length < 5) {\r\n      errors = \"Please enter your password\";\r\n      formIsValid = false;\r\n    } else {\r\n      errors = \"\";\r\n      formIsValid = true;\r\n    }\r\n\r\n    setLoginErrors(errors);\r\n\r\n    return formIsValid;\r\n  };\r\n\r\n  const onFocusEvent = () => {\r\n    setLoginErrors(\"\");\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    if (loginErrors === \"\") {\r\n      return;\r\n    }\r\n    const timer = setTimeout(() => {\r\n      setLoginErrors(\"\");\r\n    }, 3000);\r\n    return () => clearTimeout(timer);\r\n  }, [loginErrors]);\r\n\r\n  const handleLoginSubmit = (e: onClick) => {\r\n    e.preventDefault();\r\n\r\n    const user = {\r\n      email: loginCredentials.username,\r\n      password: loginCredentials.password,\r\n    };\r\n\r\n    if (handleLoginValidation()) {\r\n      UserAPI.login(user)\r\n        .then((response: any) => {\r\n          if (response.status === 200 && response.data === \"USER\") {\r\n            setSuccessMsg(\"Sucessfully logged in!\");\r\n            localStorage.setItem(\"user-login\", user.email);\r\n            navigate(\"/\");\r\n            setTimeout(() => {\r\n              window.location.reload();\r\n            }, 3000);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          if (error.response) {\r\n            console.log(error.response.status);\r\n            switch (error.response.status) {\r\n              case 401: {\r\n                setLoginErrors(\"Incorrect Password\");\r\n                break;\r\n              }\r\n              case 500: {\r\n                window.location.href = ERROR500;\r\n                break;\r\n              }\r\n              case 404: {\r\n                window.location.href = ERROR404;\r\n                break;\r\n              }\r\n              default:\r\n                window.location.href = ERROR500;\r\n            }\r\n          }\r\n        });\r\n    }\r\n  };\r\n\r\n  return {\r\n    loginCredentials,\r\n    loginErrors,\r\n    handleLoginFormChange,\r\n    handleLoginSubmit,\r\n    successMsg,\r\n    onFocusEvent,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}