{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { useNavigate } from \"react-router-dom\";\nimport { toast } from \"react-toastify\";\nimport { DeleteItem, LoggedInUser, RemoveItem, updateLocalCart } from \"../../common/Script\";\nimport { ViewCart } from \"../../stateContainers/Cart/ThunkActions\";\nimport { AddFavItem } from \"../../stateContainers/WishList/ThunkActions\";\nimport { useWishList } from \"../WishList/useWishList.hook\";\nexport const useCart = () => {\n  _s();\n\n  var _viewCart, _viewCart$cartItem;\n\n  //Types;\n  //Customer Id\n  const UserId = {\n    cusId: LoggedInUser\n  };\n  const navigate = useNavigate();\n  const {\n    favItems\n  } = useWishList();\n  const dispatch = useDispatch(); //CartItem\n\n  const FetchCartData = async () => {\n    if (LoggedInUser) dispatch(ViewCart(UserId));\n  };\n\n  const {\n    cartData\n  } = useSelector(state => state);\n  const {\n    selectedProductData\n  } = useSelector(state => state);\n  const reduxtCartState = cartData && cartData.viewCartItem;\n  const isAddedToCart = cartData && cartData.addItem;\n  const updatedProduct = selectedProductData && selectedProductData.updatedProduct;\n  let viewCart = {};\n  let cartItem = localStorage.getItem(\"cartItems\");\n  if (cartItem) viewCart = JSON.parse(cartItem);\n  let result = viewCart.cartItem && ((_viewCart = viewCart) === null || _viewCart === void 0 ? void 0 : (_viewCart$cartItem = _viewCart.cartItem) === null || _viewCart$cartItem === void 0 ? void 0 : _viewCart$cartItem.filter(item1 => favItems === null || favItems === void 0 ? void 0 : favItems.some(item2 => {\n    var _item1$productInfo;\n\n    return (item1 === null || item1 === void 0 ? void 0 : (_item1$productInfo = item1.productInfo) === null || _item1$productInfo === void 0 ? void 0 : _item1$productInfo.productCode) === (item2 === null || item2 === void 0 ? void 0 : item2.mcId);\n  })));\n  const productCodes = result && result.map(item => item.productInfo.productCode);\n\n  const getProductDetails = productDetails => {\n    const taxValue = productDetails.tax / productDetails.productInfo.qty;\n    const productInfo = { ...productDetails.productInfo,\n      qty: 1\n    };\n    return {\n      productInfo,\n      quantity: 1,\n      subTotal: 1 * productDetails.productInfo.price,\n      actualPrice: 1 * productDetails.productInfo.originalPrice,\n      deduction: 0,\n      tax: productDetails.tax ? taxValue : productDetails.tax\n    };\n  };\n\n  const findItem = item => {\n    return viewCart.cartItem.find(function (o) {\n      return o.productInfo.productCode === item.productInfo.productCode && o.productInfo.size === item.productInfo.size;\n    });\n  };\n\n  const AddItemToCart = item => {\n    const selectedItem = findItem(item);\n\n    if (selectedItem) {\n      const selectedProduct = getProductDetails(selectedItem);\n      updateLocalCart(selectedProduct);\n    }\n  };\n\n  const RemoveItemFromCart = item => {\n    RemoveItem(item.productInfo.productCode, item.productInfo.size);\n  };\n\n  const handleDeleteItem = async (mcid, size) => {\n    DeleteItem(mcid, size);\n    window.location.reload();\n  };\n\n  const handleDeleteAll = async () => {\n    localStorage.removeItem(\"cartItems\");\n    window.location.reload();\n  }; // Notes\n\n\n  let value = localStorage.getItem(\"note\");\n  const [note, setNote] = useState(value ? value : \"\");\n\n  const handleSaveNote = e => {\n    e.preventDefault();\n  };\n\n  const onSaveChange = e => {\n    e.preventDefault();\n    setNote(e.target.value);\n  };\n\n  const handleClearNote = e => {\n    e.preventDefault();\n    setNote(\"\");\n  };\n\n  React.useEffect(() => {\n    localStorage.setItem(\"note\", note);\n  }, [note]);\n\n  const handleOnClickCheckOut = () => {\n    navigate(\"/address\");\n  }; //Add To WishList\n\n\n  const FavIconOnclick = id => {\n    if (LoggedInUser) {\n      const item = {\n        phone: LoggedInUser,\n        pId: id\n      };\n      dispatch(AddFavItem(item));\n    } else {\n      toast.info(\"Login\");\n    }\n  };\n\n  return {\n    reduxtCartState,\n    FetchCartData,\n    viewCart,\n    handleDeleteItem,\n    handleDeleteAll,\n    handleSaveNote,\n    handleClearNote,\n    note,\n    onSaveChange,\n    AddItemToCart,\n    handleOnClickCheckOut,\n    FavIconOnclick,\n    isAddedToCart,\n    productCodes,\n    result,\n    RemoveItemFromCart,\n    updatedProduct\n  };\n};\n\n_s(useCart, \"m70Drj5TPv/r8hxahP4tKbv3wDM=\", false, function () {\n  return [useNavigate, useWishList, useDispatch, useSelector, useSelector];\n});","map":{"version":3,"names":["React","useState","useDispatch","useSelector","useNavigate","toast","DeleteItem","LoggedInUser","RemoveItem","updateLocalCart","ViewCart","AddFavItem","useWishList","useCart","UserId","cusId","navigate","favItems","dispatch","FetchCartData","cartData","state","selectedProductData","reduxtCartState","viewCartItem","isAddedToCart","addItem","updatedProduct","viewCart","cartItem","localStorage","getItem","JSON","parse","result","filter","item1","some","item2","productInfo","productCode","mcId","productCodes","map","item","getProductDetails","productDetails","taxValue","tax","qty","quantity","subTotal","price","actualPrice","originalPrice","deduction","findItem","find","o","size","AddItemToCart","selectedItem","selectedProduct","RemoveItemFromCart","handleDeleteItem","mcid","window","location","reload","handleDeleteAll","removeItem","value","note","setNote","handleSaveNote","e","preventDefault","onSaveChange","target","handleClearNote","useEffect","setItem","handleOnClickCheckOut","FavIconOnclick","id","phone","pId","info"],"sources":["C:/Users/arunm/MeMeglobalsites/Elysium/New folder/ElysiumChange/src/components/containers/Cart/useCart.hook.tsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { toast } from \"react-toastify\";\r\nimport {\r\n  ICartItemResponse,\r\n  IProduct,\r\n  IViewCartResponse,\r\n} from \"../../../model/IProductType\";\r\nimport { IRootState } from \"../../../redux/reducer/CombineReducer\";\r\nimport {\r\n  DeleteItem,\r\n  LoggedInUser,\r\n  RemoveItem,\r\n  updateLocalCart,\r\n} from \"../../common/Script\";\r\nimport { ViewCart } from \"../../stateContainers/Cart/ThunkActions\";\r\nimport { AddFavItem } from \"../../stateContainers/WishList/ThunkActions\";\r\nimport { useWishList } from \"../WishList/useWishList.hook\";\r\n\r\nexport interface IAddCart {\r\n  cartPId: string;\r\n  custId: string;\r\n  price: number;\r\n  qty: number;\r\n  size: string;\r\n}\r\n\r\nexport const useCart = () => {\r\n  //Types;\r\n  interface IVIEWCART {\r\n    cusId: string;\r\n  }\r\n\r\n  interface IDELETECART {\r\n    cusId: string;\r\n  }\r\n\r\n  //Customer Id\r\n  const UserId: IVIEWCART | IDELETECART = {\r\n    cusId: LoggedInUser as string,\r\n  };\r\n\r\n  const navigate = useNavigate();\r\n  const { favItems } = useWishList();\r\n  const dispatch = useDispatch();\r\n  //CartItem\r\n  const FetchCartData = async () => {\r\n    if (LoggedInUser) dispatch(ViewCart(UserId));\r\n  };\r\n\r\n  const { cartData } = useSelector((state: IRootState) => state);\r\n  const { selectedProductData } = useSelector((state: IRootState) => state);\r\n  const reduxtCartState = cartData && cartData.viewCartItem;\r\n  const isAddedToCart = cartData && cartData.addItem;\r\n  const updatedProduct =\r\n    selectedProductData && selectedProductData.updatedProduct;\r\n\r\n  let viewCart: IViewCartResponse = {} as IViewCartResponse;\r\n  let cartItem = localStorage.getItem(\"cartItems\");\r\n  if (cartItem) viewCart = JSON.parse(cartItem as string);\r\n\r\n  let result =\r\n    viewCart.cartItem &&\r\n    viewCart?.cartItem?.filter((item1: ICartItemResponse) =>\r\n      favItems?.some(\r\n        (item2: IProduct) => item1?.productInfo?.productCode === item2?.mcId\r\n      )\r\n    );\r\n\r\n  const productCodes =\r\n    result &&\r\n    result.map((item: ICartItemResponse) => item.productInfo.productCode);\r\n\r\n  const getProductDetails = (productDetails: ICartItemResponse) => {\r\n    const taxValue = productDetails.tax / productDetails.productInfo.qty;\r\n\r\n    const productInfo = {\r\n      ...productDetails.productInfo,\r\n      qty: 1,\r\n    };\r\n\r\n    return {\r\n      productInfo,\r\n      quantity: 1,\r\n      subTotal: 1 * productDetails.productInfo.price,\r\n      actualPrice: 1 * productDetails.productInfo.originalPrice,\r\n      deduction: 0,\r\n      tax: productDetails.tax ? taxValue : productDetails.tax,\r\n    };\r\n  };\r\n\r\n  const findItem = (item: ICartItemResponse) => {\r\n    return viewCart.cartItem.find(function (o) {\r\n      return (\r\n        o.productInfo.productCode === item.productInfo.productCode &&\r\n        o.productInfo.size === item.productInfo.size\r\n      );\r\n    });\r\n  };\r\n\r\n  const AddItemToCart = (item: ICartItemResponse) => {\r\n    const selectedItem = findItem(item);\r\n    if (selectedItem) {\r\n      const selectedProduct = getProductDetails(selectedItem);\r\n      updateLocalCart(selectedProduct);\r\n    }\r\n  };\r\n\r\n  const RemoveItemFromCart = (item: ICartItemResponse) => {\r\n    RemoveItem(item.productInfo.productCode, item.productInfo.size);\r\n  };\r\n\r\n  const handleDeleteItem = async (mcid: number, size: string) => {\r\n    DeleteItem(mcid, size);\r\n    window.location.reload();\r\n  };\r\n\r\n  const handleDeleteAll = async () => {\r\n    localStorage.removeItem(\"cartItems\");\r\n    window.location.reload();\r\n  };\r\n\r\n  // Notes\r\n\r\n  let value = localStorage.getItem(\"note\");\r\n\r\n  const [note, setNote] = useState(value ? value : \"\");\r\n\r\n  const handleSaveNote = (e: any) => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  const onSaveChange = (e: any) => {\r\n    e.preventDefault();\r\n    setNote(e.target.value);\r\n  };\r\n\r\n  const handleClearNote = (e: any) => {\r\n    e.preventDefault();\r\n    setNote(\"\");\r\n  };\r\n\r\n  React.useEffect(() => {\r\n    localStorage.setItem(\"note\", note);\r\n  }, [note]);\r\n\r\n  const handleOnClickCheckOut = () => {\r\n    navigate(\"/address\");\r\n  };\r\n\r\n  //Add To WishList\r\n\r\n  const FavIconOnclick = (id: number) => {\r\n    if (LoggedInUser) {\r\n      const item = {\r\n        phone: LoggedInUser as string,\r\n        pId: id,\r\n      };\r\n\r\n      dispatch(AddFavItem(item));\r\n    } else {\r\n      toast.info(\"Login\");\r\n    }\r\n  };\r\n\r\n  return {\r\n    reduxtCartState,\r\n    FetchCartData,\r\n    viewCart,\r\n    handleDeleteItem,\r\n    handleDeleteAll,\r\n    handleSaveNote,\r\n    handleClearNote,\r\n    note,\r\n    onSaveChange,\r\n    AddItemToCart,\r\n    handleOnClickCheckOut,\r\n    FavIconOnclick,\r\n    isAddedToCart,\r\n    productCodes,\r\n    result,\r\n    RemoveItemFromCart,\r\n    updatedProduct,\r\n  };\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}